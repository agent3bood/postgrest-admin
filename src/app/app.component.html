<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <h1 class="text-center" >
        Welcome to {{ title }}
      </h1>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <!-- add db form -->
      <form #newDbForm="ngForm" (ngSubmit)="addDb(newDbForm)" >
        <div class="form-row">
          <div class="form-group col-5">
            <input name="url" ngModel required class="form-control" placeholder="API url" />
          </div>
          <div class="form-group col-5">
            <input name="auth" ngModel class="form-control" placeholder="API auth" />
          </div>
          <div class="form-group col-2">
            <button type="submit" class="btn btn-primary">Connect</button>
          </div>
        </div>
      </form>
    </div>
  </div>
<!--  -->
  <div class="row">
    <div class="col-3">
      <div id="app-sidebar" class="app-sidebar">
        <app-dbs-list
          *ngIf="appService.dbs"
          [dbs]="appService.dbs"
          (selectDb)="onSelectDb($event)">
        </app-dbs-list>
        <app-paths-list
          *ngIf="appService.selectedDb"
          [paths]="appService.selectedDb.paths"
          [selectedPath]="appService.selectedPath"
          (selectPath)="onSelectPath($event)"
        >
        </app-paths-list>
      </div>
    </div>
    <div class="col-9">
      <div id="app-content" class="app-content">
        <app-parameters-list
          *ngIf="appService.selectedPath"
          [parameters]="appService.selectedPath.get.parameters">
        </app-parameters-list>
      </div>
    </div>
  </div>
  <div *ngIf="appService.selectedPath">
    <!-- fetch data button -->
    <div>
      <button class="btm btn-primary" (click)="getSelectedPathData()">
        get()
      </button>
    </div>
    <!-- display data -->
    <div *ngIf="appService.selectedPath.get.data">
      <table class="table">
        <thead>
          <tr>
            <th
              *ngFor="let property of appService.selectedPath.get.responses[0].schema.properties"
              class="col"
            >
              {{property.name}}
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of appService.selectedPath.get.data">
            <th *ngFor="let property of appService.selectedPath.get.responses[0].schema.properties" >
              {{row[property.name]}}
            </th>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
